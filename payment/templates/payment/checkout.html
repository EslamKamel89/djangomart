<!--prettier-ignore-->
{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% block title %} Checkout {% endblock %}

{% block content %}

<div class="max-w-6xl mx-auto px-4 py-16">
  <!-- Page Header -->
  <div class="mb-10">
    <h1 class="text-3xl font-bold text-neutral-900">Checkout</h1>
    <p class="mt-2 text-sm text-muted">
      Review your details and complete your purchase securely.
    </p>
  </div>

  <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
    <!-- Checkout Form -->
    <div class="lg:col-span-2">
      <div
        class="bg-white border border-neutral rounded-2xl shadow-sm p-6 md:p-8"
      >
        <!-- Messages -->
        {% if messages %}
        <ul class="mb-6 space-y-2 text-center">
          {% for message in messages %}
          <li
            class="text-sm {% if 'error' in message.tags %} text-error {% endif %} {% if 'success' in message.tags %} text-success {% endif %}"
          >
            {{ message }}
          </li>
          {% endfor %}
        </ul>
        {% endif %}

        <!-- Form -->
        <form method="POST" class="space-y-6">{% crispy form %}</form>
      </div>
    </div>

    <!-- Order Summary -->
    <div class="lg:col-span-1">
      <div
        class="bg-white border border-neutral rounded-2xl shadow-sm p-6 md:p-8 sticky top-24"
      >
        <h2 class="text-lg font-semibold text-neutral-900">Order summary</h2>

        <!-- Example summary rows (static for now) -->
        <div class="mt-4 space-y-3 text-sm">
          <div class="flex justify-between">
            <span class="text-muted">Subtotal</span>
            <span class="text-neutral-900">${{cart_total}}</span>
          </div>

          <div class="flex justify-between">
            <span class="text-muted">Shipping</span>
            <span class="text-neutral-900">Free</span>
          </div>

          <div
            class="flex justify-between border-t border-neutral pt-3 font-semibold"
          >
            <span>Total</span>
            <span class="text-primary">${{cart_total}}</span>
          </div>
        </div>

        <!-- Trust note -->
        <p class="mt-6 text-xs text-muted leading-relaxed">
          Your payment information is processed securely. We do not store your
          card details.
        </p>

        <!-- Back link -->
        <a
          href="{% url 'cart-show-create' %}"
          class="mt-4 inline-flex items-center gap-2 text-sm text-primary hover:underline"
        >
          ‚Üê Return to cart
        </a>
      </div>
    </div>
  </div>
</div>

{% endblock %}
